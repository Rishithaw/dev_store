<%= form_with url: products_path, method: :get, local: true do |f| %>
  <div style="display: flex; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">

    <!-- Keyword -->
    <div>
      <%= f.label :keyword, "Search" %><br>
      <%= f.text_field :keyword, value: params[:keyword] %>
    </div>

    <!-- Category -->
    <div>
      <%= f.label :search_category_id, "Category" %><br>
      <%= f.collection_select :search_category_id, @categories, :id, :name,
          include_blank: "All Categories",
          selected: params[:search_category_id] %>
    </div>

    <!-- Filter type -->
    <div>
      <%= f.label :filter, "Filter Products" %><br>
      <%= f.select :filter,
        [
          ["On Sale", "on_sale"],
          ["New (Added ≤3 days)", "new"],
          ["Recently Updated (≤3 days)", "updated"]
        ],
        include_blank: "None",
        selected: params[:filter] %>
    </div>

    <!-- Submit -->
    <div style="align-self: end;" >
      <%= f.submit "Search", class: "btn btn-primary" %>
    </div>

    <!-- Clear Filters -->
    <% if params[:keyword].present? || params[:search_category_id].present? || params[:filter].present? %>
      <div style="align-self: end;" >
        <%= link_to "Clear Filters", products_path, class: "btn btn-secondary" %>
      </div>
    <% end %>

  </div>
<% end %>
